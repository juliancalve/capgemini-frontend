(this["webpackJsonpcapgemini-frontend"]=this["webpackJsonpcapgemini-frontend"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},68:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),A=a(18),i=a.n(A),r=(a(38),a(39),a(40),a(13)),s=a(14),o=a(3),l=a(4),u=(a(41),a(1)),d=function(e){var t=e.children;return Object(u.jsx)("div",{className:"card",children:Object(u.jsx)("div",{className:"card-content",children:t})})},j=(a(43),function(e){var t=e.children;return Object(u.jsx)("div",{className:"container centered-layout",children:Object(u.jsx)("div",{className:"centered-layout__card",children:Object(u.jsxs)(d,{children:[" ",t," "]})})})}),b=a(11),g=a(6),m=a.n(g),p=a(12),h=a(32),O=a.n(h).a.create({baseURL:"https://capgemini-policy.herokuapp.com/api"});O.interceptors.request.use((function(e){var t=localStorage.getItem("id");return e.headers.Authorization=t||"",e}));var f=O,x="/auth",B=function(e){return f.post("".concat(x,"/login"),{email:e})},E=function(e,t){var a,n=localStorage.getItem("role")||"noLoggedIn";return n&&((a=!!K[n].find((function(e){return e.path===t.location.pathname})))||t.push(K[n||"noLoggedIn"][0].path)),a},v=function(e){var t;return Object.entries(K).forEach((function(a){var n=Object(l.a)(a,2);n[0];n[1].forEach((function(a){a.path===e.location.pathname&&(t=a.name)}))})),t},Q={user:{id:localStorage.getItem("id"),role:localStorage.getItem("role")},error:""},w="LOGIN",C="ERROR",N="LOGOUT";var y=function(e){return function(){var t=Object(p.a)(m.a.mark((function t(a){var n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=localStorage.getItem("id"),c=E(0,e),n&&c&&(c=f.get("".concat(x,"/get-user"))),c||n||a({type:N})}catch(A){a({type:C,payload:A.response.data.data})}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=(a(68),function(){var e=Object(b.b)(),t=Object(o.f)(),a=Object(n.useState)(""),c=Object(l.a)(a,2),A=c[0],i=c[1],r=Object(n.useState)(!1),s=Object(l.a)(r,2),d=s[0],g=s[1],h=Object(b.c)((function(e){return e.auth})).error;return Object(u.jsx)(j,{children:Object(u.jsxs)("div",{className:"login",children:[Object(u.jsx)("img",{alt:"capgemini logo",src:"https://www.capgemini.com/wp-content/themes/capgemini-komposite/assets/images/logo.svg"}),Object(u.jsxs)("div",{className:"field login__field--input",children:[Object(u.jsxs)("p",{className:"control login__control--input",children:[Object(u.jsx)("input",{className:"input login__input",type:"email",placeholder:"Email",onChange:function(e){i(e.target.value)},value:A}),Object(u.jsx)("span",{className:"icon is-small is-left",children:Object(u.jsx)("i",{className:"fas fa-envelope"})}),Object(u.jsx)("span",{className:"icon is-small is-right",children:Object(u.jsx)("i",{className:"fas fa-check"})})]}),d&&Object(u.jsx)("span",{className:"has-text-danger",children:"Check your email"})]}),Object(u.jsx)("div",{className:"field login__field--button",children:Object(u.jsxs)("p",{className:"control",children:[Object(u.jsx)("button",{className:"button is-success login__button",onClick:function(){A.includes("@")?(g(!1),e(function(e){var t=e.email,a=e.history;return function(){var e=Object(p.a)(m.a.mark((function e(n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t);case 3:(c=e.sent).data?(n({type:w,payload:c.data.data}),localStorage.setItem("id",c.data.data.id),localStorage.setItem("role",c.data.data.role),n(y(a))):(console.log(c.response.data),n({type:C,payload:c.response.data.data})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data),n({type:C,payload:e.t0.response.data.data});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}({email:A,history:t}))):g(!0)},children:"Login"}),h&&Object(u.jsx)("p",{className:"has-text-danger",children:h})]})})]})})}),P=(a(73),function(){var e=Object(b.b)(),t=Object(o.f)(),a=Object(b.c)((function(e){return e.auth.user})).role;return Object(u.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[Object(u.jsxs)("div",{className:"navbar-brand",children:[Object(u.jsx)("img",{alt:"capgemini logo",src:"https://www.capgemini.com/wp-content/themes/capgemini-komposite/assets/images/logo.svg",width:"120",height:"28"}),Object(u.jsxs)("a",{role:"button",className:"navbar-burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasic",onClick:function(){var e=document.querySelector("#navbarBasic");null===e||void 0===e||e.classList.toggle("is-active")},children:[Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"})]})]}),Object(u.jsxs)("div",{id:"navbarBasic",className:"navbar-menu",children:[Object(u.jsx)("div",{className:"navbar-start",children:K["admin"===a?"admin":"user"].map((function(e,a){return Object(u.jsx)("a",{className:"navbar-item",onClick:function(){return t.push(e.path)},children:e.name},"".concat(a,"-").concat(e.name))}))}),Object(u.jsx)("div",{className:"navbar-end",children:Object(u.jsx)("div",{className:"navbar-item",children:Object(u.jsx)("a",{className:"navbar-item navbar-item__logout",onClick:function(){e((function(e){localStorage.clear(),e({type:N}),window.location.href=K.noLoggedIn[0].path}))},children:"Log out"})})})]})]})}),I=(a(74),function(e){var t=e.children,a=Object(o.f)();return Object(u.jsxs)("div",{className:"container is-full",children:[Object(u.jsx)(P,{}),Object(u.jsx)("h6",{className:"title is-4",children:v(a)}),Object(u.jsx)(d,{children:t})]})}),_=(a(75),function(e){var t=e.currentPage,a=e.totalPages,n=e.onClick,c=function(e){console.log(e),n(e)};return Object(u.jsxs)("div",{className:"paginator__container",children:[1!=t?Object(u.jsx)("div",{className:"paginator__clickeable",onClick:function(){return c(1)},children:Object(u.jsx)("span",{children:"<<"})}):null,1!=t?Object(u.jsx)("div",{className:"paginator__clickeable",onClick:function(){return c(t-1)},children:Object(u.jsx)("span",{children:"<"})}):null,Object(u.jsx)("div",{children:Object(u.jsxs)("p",{className:"paginator__page--active",children:[t," of ",a]})}),t<a?Object(u.jsx)("div",{className:"paginator__clickeable",onClick:function(){return c(t+1)},children:Object(u.jsx)("span",{children:">"})}):null,t<a?Object(u.jsx)("div",{className:"paginator__clickeable",onClick:function(){return c(a)},children:Object(u.jsx)("span",{children:">>"})}):null]})}),S=(a(76),a.p+"static/media/red-point.9a0cce49.png"),D=a.p+"static/media/search.b6bc3c4f.png",M=a.p+"static/media/check.92bff498.png",H=function(e){var t=e.dataHeader,a=e.dataRows,n=e.onChangePage,c=e.currentPage,A=e.totalPages;return Object(u.jsxs)("div",{className:"table__container",children:[Object(u.jsxs)("table",{className:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsx)("tr",{children:t.map((function(e){return Object(u.jsx)("th",{className:"table__th",children:(t=e,t.charAt(0).toUpperCase()+t.slice(1).toLocaleLowerCase())},e);var t}))})}),a.length>0?Object(u.jsx)("tbody",{children:a.map((function(e,t){return Object(u.jsx)("tr",{className:"table__row",children:Object.keys(e).map((function(t){return Object(u.jsx)("td",{className:"table__td",children:"boolean"===typeof e[t]?Object(u.jsx)("img",{alt:"check",src:"".concat(e[t]?M:S),width:"20"}):"function"===typeof e[t]?Object(u.jsx)("img",{alt:"search",className:"clickeable",src:D,width:"20",onClick:function(){e[t]()}}):e[t]},t)}))},t)}))}):Object(u.jsx)("h6",{className:"title is-6 table__message",children:"No content available"})]}),Object(u.jsx)(_,{onClick:n,currentPage:c,totalPages:A})]})},L="/policy",F=function(e){return f.get("".concat(L,"/all?page=").concat(e))},U=function(e,t){return f.get("".concat(L,"/").concat(t,"?page=").concat(e))},J=function(e){return new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"})},R=["amount insured","email","inception date","installment payment"],V=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],A=Object(n.useState)(1),i=Object(l.a)(A,2),r=i[0],s=i[1],o=Object(n.useState)(1),d=Object(l.a)(o,2),j=d[0],b=d[1],g=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(t);case 2:(a=e.sent).data&&(c(a.data.data.data),s(a.data.data.page),b(a.data.data.totalPages));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g(1)}),[]),Object(u.jsx)(I,{children:Object(u.jsx)(H,{dataHeader:R,dataRows:a.map((function(e){return{amountInsured:"$".concat(e.amountInsured),email:e.email,inceptionDate:J(e.inceptionDate),installmentPayment:e.installmentPayment}})),currentPage:r,totalPages:j,onChangePage:function(e){return g(e)}})})},G={login:"/login",policies:"/policies",clientPolicies:"/policies/:email",clients:"/clients"},Y=function(e){return f.get("".concat("/client","?page=").concat(e))},z=["name","email","role","options"],T=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],A=Object(n.useState)(1),i=Object(l.a)(A,2),r=i[0],s=i[1],d=Object(n.useState)(1),j=Object(l.a)(d,2),b=j[0],g=j[1],h=Object(o.f)(),O=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,Y(t);case 3:(a=e.sent).data&&(c(a.data.data.data),s(a.data.data.totalPages),g(a.data.data.page));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){O()}),[]),Object(u.jsx)(I,{children:Object(u.jsx)(H,{dataRows:a.map((function(e){return{name:e.name,email:e.email,role:e.role,option:function(){h.push(G.clientPolicies.replace(":email",e.email))}}})),dataHeader:z,currentPage:b,totalPages:r,onChangePage:function(e){return O(e)}})})},X=["amount insured","email","inception date","installment payment"],q=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],A=Object(n.useState)(1),i=Object(l.a)(A,2),r=i[0],s=i[1],d=Object(n.useState)(1),j=Object(l.a)(d,2),b=j[0],g=j[1],h=Object(o.g)().email,O=Object(o.f)(),f=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(h),e.next=3,U(t,h);case 3:(a=e.sent).data&&(c(a.data.data.data),s(a.data.data.page),g(a.data.data.totalPages));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f(1)}),[]),Object(u.jsxs)(I,{children:[Object(u.jsx)("div",{children:Object(u.jsx)("img",{alt:"back",className:"clickeable",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAABFfAAARXwH207MgAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAACdQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIpVOngAAAAx0Uk5TAC0uLzAxdoDq6+ztaQS7igAABFpJREFUeNrt3MmRFTkUhtHasW0TMAETMAETMAEDtMEEMAEwAWxQAzIKmqahhjdkRS+I0Hfkgf44manh3ry5+bPjyaub9hizPf8na7UJjLVmHECbwPgngBkHUCYw/g1gxgF0CYz/AphxAFUC43cAMw6gSWDcDmDGARQJjLsBzDiAHoFxP4AZB1AjMB4GMOMAWgTGqQBmHECJwDgdwIwD6BAY5wKYcQAVAuN8ADMOoEFgXApgxgEUCIzLAcw4gP0JjGsBzDiA3QmM6wHMOIC9CYwjAcw4gJ0JjGMBzDiAfQmMowHMOIBdCYzjAcw4gLVetgGsry/iAD4BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAVgCexwF8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANgewJc6gA8AAAAAAAAAAAAAAAAAAAAtAM/iAN4DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsBeFcH8BQAAAAAAIAogM91AG8BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPYE8FccwBsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAICNAfxdB/AaAAAAAACAKoAdxv8BsGMAOQCrDmDVAaw6gFUHsOoAVh3AqgNYdQCrDmDVAaw6gFUHsOoAVh3AqgNYdQCrDmDVAaw6gFUHsOoAVh3AqgNYdQCrDmDVAaw6gFUHsOoABOARyL8EfQbzCyFL4fxmyHY4fyDiSCx/KOpYPH8x4mosfznqejxfIKFEJl8kpUwuXyipVDZfLK1cPt8woWUm3zSlbS7fOKl1Nt88rX0+/wMFv9BAAAEEEEDgEeNNncBnBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQACBJIG3eQJPEUAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQR6BN7VCXxBAAEEEEAgTuBZncB7BBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQCBG4EOewHMEEEAAAQQQQAABBBBAAIEugY91Al8RQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEogQ+5Qm8QAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAgRiBl3ECc8f5P4bAqy0DOE5gTwCPILApgMMEdgVwmMC2AA4S2BfAQQIbAzhEYGcAhwhsDeAAgb0BHCCwOYCrBHYHcJXA9gCuENgfwBUCAQAXCRQAXCSQAHCBQAPABQIRAGcJVACcJZABcIZAB8AZAiEAJwmUAJwkkAJwgkALwAkCMQAPCNQAPCCQA3CPQA/APQJBAHcIFAHcIZAEcItAE8AtAlEAvwhUAfwikAXwk0AXwE8CYQA/CJQB/CCQBvCdQBvAdwJ/GsA3IJSuQm/k4w0AAAAASUVORK5CYII=",onClick:function(){O.goBack()},width:"30"})}),Object(u.jsx)(H,{dataHeader:X,dataRows:a.map((function(e){return{amountInsured:"$".concat(e.amountInsured),email:e.email,inceptionDate:J(e.inceptionDate),installmentPayment:e.installmentPayment}})),currentPage:r,totalPages:b,onChangePage:function(e){return f(e)}})]})},K={noLoggedIn:[{path:G.login,component:k,name:"Login",exact:!0}],admin:[{path:G.policies,component:V,name:"Policies",exact:!0},{path:G.clientPolicies,component:q},{path:G.clients,component:T,name:"Clients",exact:!0}],user:[{path:G.policies,component:V,name:"Policies",exact:!0}]},Z=function(){var e=Object(b.c)((function(e){return e.auth.user})).id,t=Object(o.f)(),a=Object(b.b)();Object(n.useEffect)((function(){a(y(t))}),[t.location]);return Object(u.jsx)(o.c,{children:K[e?"admin":"noLoggedIn"].map((function(e){return Object(u.jsx)(o.a,Object(s.a)({},e),e.name)}))})};var W=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(r.a,{children:Object(u.jsx)(Z,{})})})},$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,A=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),A(e),i(e)}))},ee=a(17),te=a(33),ae=Object(ee.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(s.a)(Object(s.a)({},e),{},{user:t.payload,error:""});case C:return Object(s.a)(Object(s.a)({},e),{},{error:t.payload});case N:return Q;default:return e}}}),ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ee.c;var ce=Object(ee.d)(ae,ne(Object(ee.a)(te.a)));i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(b.a,{store:ce,children:Object(u.jsx)(W,{})})}),document.getElementById("root")),$()}},[[77,1,2]]]);
//# sourceMappingURL=main.4493ac7a.chunk.js.map